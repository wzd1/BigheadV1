var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var s=RES.getRes(e);s?n(s):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var bighead;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/skins/countDown.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.test1.addEventListener("complete",this.onTweenGroupComplete,this),this.test1.addEventListener("itemComplete",this.onTweenItemComplete,this),this.test1.play()},t.prototype.onTweenGroupComplete=function(){this.test1.removeEventListener("complete",this.onTweenGroupComplete,this),this.test1.removeEventListener("itemComplete",this.onTweenItemComplete,this)},t.prototype.onTweenItemComplete=function(e){e.data},t}(eui.Component);e.CountDownAnime=t,__reflect(t.prototype,"bighead.CountDownAnime")}(bighead||(bighead={}));var bighead;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.gameIscontinue=!1,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(i,t),i.prototype.onAddToStage=function(t){this.skinName="src/bighead/GameContainerSkin.exml",this.P1=new e.GameScene,this.P2=new e.GameScene,this.P2.anchorOffsetX=this.P2.width,this.P2.anchorOffsetY=this.P2.height,this.P2.rotation=180,this.addChildAt(this.P1,1),this.addChildAt(this.P2,1),this.addEventListener(egret.Event.ENTER_FRAME,this.gameViewUpdate,this),this.P1.pauseBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.gamePause,this),this.P2.pauseBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.gamePause,this),this.resetBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.resetBtnHandler,this),this.continueBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.continueBtnHandler,this)},i.prototype.gameViewUpdate=function(e){this.P1.readyStatus&&this.P2.readyStatus?this.gameIscontinue||this.readyStar():(this.P1.removePlayerEvtListener(),this.P2.removePlayerEvtListener(),this.removeGameCtrl())},i.prototype.readyStar=function(){var t=this;this.gameIscontinue=!0,this.P1.readyBtn.visible=!1,this.P2.readyBtn.visible=!1,this.CountDownAnime=new e.CountDownAnime,this.CountDownAnime1=new e.CountDownAnime,this.CountDownAnime.x=(this.stage.stageWidth-this.CountDownAnime.width)/2,this.CountDownAnime.y=788,this.CountDownAnime1.x=(this.stage.stageWidth-this.CountDownAnime1.width)/2,this.CountDownAnime1.y=438,this.CountDownAnime1.anchorOffsetX=this.CountDownAnime1.width,this.CountDownAnime1.anchorOffsetY=this.CountDownAnime1.height,this.CountDownAnime1.rotation=180,this.addChild(this.CountDownAnime),this.addChild(this.CountDownAnime1),setTimeout(function(){t.CountDownAnime.visible=!1,t.CountDownAnime1.visible=!1,t.P1.pauseBtn.visible=!0,t.P2.pauseBtn.visible=!0,t.P1.addPlayerEvtListener(),t.P2.addPlayerEvtListener(),t.gameCtrl()},4e3)},i.prototype.gameCtrl=function(){this.P1.pumpBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.headChange,this),this.P2.pumpBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.headChange2,this)},i.prototype.removeGameCtrl=function(){this.P1.pumpBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.headChange,this),this.P2.pumpBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.headChange2,this)},i.prototype.headChange=function(e){var t=this;this.P1.scaleMom=this.P1.scaleMom+.05,"resource/skins/GameRoleHit.exml"!=this.P1.gameRole.skinName&&(this.P1.gameRole.skinName="resource/skins/GameRoleHit.exml",setTimeout(function(){t.P1.gameRole.skinName="resource/skins/GameRole.exml",t.P1.gameRole.scaleX=t.P1.scaleMom,t.P1.gameRole.scaleY=t.P1.scaleMom},1e3)),this.P2.scaleMom=this.P2.scaleMom-.05,this.P2.gameRole.skinName="resource/skins/GameRole.exml",this.P2.gameRole.scaleX=this.P2.scaleMom,this.P2.gameRole.scaleY=this.P2.scaleMom,this.P1.scaleMom>=1.7&&(this.P2.gameOver(),this.P1.gameWin(),this.removeEventListener(egret.Event.ENTER_FRAME,this.gameViewUpdate,this),this.resetBtn.visible=!0,this.homeBtn.visible=!0,this.P1.pauseBtn.visible=!1,this.P2.pauseBtn.visible=!1,this.P1.gameRole.visible=!1,this.P2.gameRole.visible=!1)},i.prototype.headChange2=function(e){var t=this;this.P2.scaleMom=this.P2.scaleMom+.05,"resource/skins/GameRoleHit.exml"!=this.P2.gameRole.skinName&&(this.P2.gameRole.skinName="resource/skins/GameRoleHit.exml",setTimeout(function(){t.P2.gameRole.skinName="resource/skins/GameRole.exml",t.P2.gameRole.scaleX=t.P2.scaleMom,t.P2.gameRole.scaleY=t.P2.scaleMom},1e3)),this.P1.scaleMom=this.P1.scaleMom-.05,this.P1.gameRole.skinName="resource/skins/GameRole.exml",this.P1.gameRole.scaleX=this.P1.scaleMom,this.P1.gameRole.scaleY=this.P1.scaleMom,this.P2.scaleMom>=1.7&&(this.P1.gameOver(),this.P2.gameWin(),this.removeEventListener(egret.Event.ENTER_FRAME,this.gameViewUpdate,this),this.resetBtn.visible=!0,this.homeBtn.visible=!0,this.P1.pauseBtn.visible=!1,this.P2.pauseBtn.visible=!1,this.P1.gameRole.visible=!1,this.P2.gameRole.visible=!1)},i.prototype.resetBtnHandler=function(){this.removeChild(this.P1),this.removeChild(this.P2),this.P1=new e.GameScene,this.P2=new e.GameScene,this.P2.anchorOffsetX=this.P2.width,this.P2.anchorOffsetY=this.P2.height,this.P2.rotation=180,this.addChildAt(this.P1,1),this.addChildAt(this.P2,1),this.addEventListener(egret.Event.ENTER_FRAME,this.gameViewUpdate,this),this.resetBtn.visible=!1,this.homeBtn.visible=!1,this.gameIscontinue=!1,this.P1.readyStatus=!1,this.P2.readyStatus=!1},i.prototype.gamePause=function(e){this.pauseMask.width=this.stage.stageWidth,this.continueBtn.visible=!0,this.homeBtn.visible=!0},i.prototype.continueBtnHandler=function(){this.pauseMask.width=0,this.continueBtn.visible=!1,this.homeBtn.visible=!1},i}(eui.Component);e.GameContainer=t,__reflect(t.prototype,"bighead.GameContainer")}(bighead||(bighead={}));var bighead;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/skins/GameRole.exml",t}return __extends(t,e),t}(eui.Component);e.GameRole=t,__reflect(t.prototype,"bighead.GameRole")}(bighead||(bighead={}));var bighead;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.readyStatus=!1,e.phiz=!1,e.scaleMom=1.2,e.gameover=!1,e.skinName="src/bighead/GameSceneSkin.exml",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(i,t),i.prototype.onAddToStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.createGameScene()},i.prototype.createGameScene=function(){this.stageW=this.stage.stageWidth,this.stageH=this.stage.stageHeight,this.gameRole=new e.GameRole,this.gameRole.x=0,this.gameRole.y=1178,this.gameRole.scaleX=1.2,this.gameRole.scaleY=1.2,console.log(this.gameRole.height),this.gameRole.anchorOffsetX=0,this.gameRole.anchorOffsetY=398,this.addChildAt(this.gameRole,0),this.readyBtn.skinName="resource/skins/readyBtnStart.exml",this.readyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.readyBtnHandler,this)},i.prototype.addPlayerEvtListener=function(){this.addEventListener(egret.Event.ENTER_FRAME,this.gameViewUpdate,this),this.pumpBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.pumpBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},i.prototype.removePlayerEvtListener=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.gameViewUpdate,this),this.pumpBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.pumpBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},i.prototype.onTouch=function(e){switch(e.type){case egret.TouchEvent.TOUCH_BEGIN:this.pumpBtn.skinName="resource/skins/pumpBtnClick.exml",this.phiz=!0;break;case egret.TouchEvent.TOUCH_END:this.pumpBtn.skinName="resource/skins/pumpBtnDefault.exml",this.phiz=!1}},i.prototype.readyBtnHandler=function(e){"resource/skins/readyBtnEnd.exml"!=this.readyBtn.skinName?(this.readyBtn.skinName="resource/skins/readyBtnEnd.exml",this.readyStatus=!0):(this.readyBtn.skinName="resource/skins/readyBtnStart.exml",this.readyStatus=!1)},i.prototype.gameViewUpdate=function(e){var t=egret.getTimer();1e3/(t-this.__lastTime);this.__lastTime=t},i.prototype.gameOver=function(){console.log("over"),this.gamelose.visible=!0},i.prototype.gameWin=function(){this.gamewin.visible=!0},i}(eui.Component);e.GameScene=t,__reflect(t.prototype,"bighead.GameScene")}(bighead||(bighead={}));var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isThemeLoadEnd=!1,t.isResourceLoadEnd=!1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},t.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},t.prototype.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},t.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},t.prototype.startCreateScene=function(){this.addChild(new bighead.GameContainer)},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t.prototype.startAnimation=function(e){var t=this,i=new egret.HtmlTextParser,n=e.map(function(e){return i.parse(e)}),s=this.textfield,o=-1,r=function(){o++,o>=n.length&&(o=0);var e=n[o];s.textFlow=e;var i=egret.Tween.get(s);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(r,t)};r()},t.prototype.onButtonClick=function(e){var t=new eui.Panel;t.title="Title",t.horizontalCenter=0,t.verticalCenter=0,this.addChild(t)},t}(eui.UILayer);__reflect(Main.prototype,"Main");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function s(e){t.call(n,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,s,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var bighead;!function(e){function t(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t}var i=function(){function e(){}return e.hitTest=function(e,t){var i=e.getBounds(),n=t.getBounds();return i.x=e.x,i.y=e.y,n.x=t.x,n.y=t.y,i.intersects(n)},e}();e.GameUtil=i,__reflect(i.prototype,"bighead.GameUtil"),e.createBitmapByName=t}(bighead||(bighead={}));